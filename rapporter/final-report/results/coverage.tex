\label{sec:results_coverage}

A quick overview of the results are presented in
\fref{tab:unit_coverage}. More information is presented in the following
sections. As discussed in \fref{sec:coverage_frameworks}, we were unable
to find any tool for analyzing anything else than statement test
coverage for Ruby.\\

\begin{table}[t]
    \centering
    \begin{tabular}{l l l}
        Phase & No. of tests & Test coverage\\
        \hline
        Before case-study &       59 & 42.24 \%\\
        After first part  &       58 & 55.25 \%\\
        After second part &       81 & 62.34 \%\\
    \end{tabular}
    \caption{ Statement test coverage of RSpec unit- and integration tests at different phases. }
    \label{tab:unit_coverage}
\end{table}

\begin{table}[t]
    \centering
    \begin{tabular}{l l l}
        Description & No. of tests & Test coverage\\
        \hline
        RSpec browser tests &     3 & 46.3 \%\\
        Cucumber browser tests &  8 & 61.2 \%\\
        All RSpec tests &        84 & 66.8 \%\\
    \end{tabular}
    \caption{ Statement test coverage including browser tests after the second part of the case study. }
    \label{tab:browser_coverage}
\end{table}

\subsubsection{Before the case study}

Before the start of this master's thesis, the average statement coverage
of all RSpec unit- and integration tests was 42 \%.\\

For the client-side code, no unit-tests existed. The test coverage was
thus zero at this state.\\


\subsubsection{After the first part of the case study}

The first part of the case study (described in \fref{sec:casestudy_1})
was focused on rewriting broken tests, since some of the existing tests
was not functional. During this period, a large part of the existing
test suite was either fixed or completely rewritten. Many of the
existing unit- and integration tests was rewritten and a few large
acceptance-level test was replaced by more fine-grained integration
tests. The statement coverage of the increased to 53 \% after this
part of the case study.\\

There were still no client-side unit-tests after this part, since the
focus was fixing the existing server-side tests. The client-side test
coverage was still zero at this state \\

\subsubsection{After the second part of the case study}
\label{sec:result_coverage_end}

The second part of the case study (described in \fref{sec:casestudy_2})
was focused on implementing new functionality while re-factoring old
parts as needed and write tests for new as well as re-factored code. The
first sprint of this part was focused on basic functionality, while the
second sprint was focused on extending and generalizing the new
functionality.\\

When the implementation of the new functionality was finished, statement
coverage of unit- and integration tests for the server side was 62 \%. A
subjective measure indicated that new and re-factored functions in
general has high statement coverage. In cases where full statement
coverage is not achieved, the reason is generally special cases. The
most common example is when error-messages are given when request
parameters are missing or invalid.\\

Statement test coverage for the client-side was 21 \% and the
corresponding branch coverage was 10 \%. A subjective measure
indicates that almost all of the newly implemented functions achieves
full statement coverage. The branch coverage is in general also high for
newly implemented functions, but conditionals for special cases (such as
when variables are zero or not set) are sometimes not covered.\\

\subsubsection{Test coverage for browser tests}

All metrics in the previous sections refer to test coverage for unit-
and integration tests. As one of the last steps of the second part of
the case study, browser tests was added in order to do system-level
testing.\\

The total statement test coverage for the RSpec browser tests alone was
46 \%, and the statement test coverage for all Ruby tests was 67 \%.
With the tools used, it was not possible to measure Javascript test
coverage for the test suite including browser tests.\\

The total statement test coverage for the Cucumber browser tests alone
was 61 \%. It was not possible to calculate the total coverage for
Cucumber and RSPec tests combined.\\
